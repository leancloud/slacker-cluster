<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>slacker.server.cluster documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Slacker-cluster</span> <span class="project-version">0.17.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>slacker</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></div></li><li class="depth-3 branch"><a href="slacker.client.cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cluster</span></div></a></li><li class="depth-3"><a href="slacker.client.weight.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>weight</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>discovery</span></div></div></li><li class="depth-3 branch"><a href="slacker.discovery.protocol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>protocol</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zk</span></div></div></li><li class="depth-4 branch"><a href="slacker.discovery.zk.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-4"><a href="slacker.discovery.zk.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>server</span></div></div></li><li class="depth-3 current"><a href="slacker.server.cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cluster</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="slacker.server.cluster.html#var--.3ESlackerClusterServer"><div class="inner"><span>-&gt;SlackerClusterServer</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-get-server-data"><div class="inner"><span>get-server-data</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-map-.3ESlackerClusterServer"><div class="inner"><span>map-&gt;SlackerClusterServer</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-publish-all.21"><div class="inner"><span>publish-all!</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-publish-ns.21"><div class="inner"><span>publish-ns!</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-set-server-data.21"><div class="inner"><span>set-server-data!</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-start-slacker-server"><div class="inner"><span>start-slacker-server</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-stop-slacker-server"><div class="inner"><span>stop-slacker-server</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-unpublish-all.21"><div class="inner"><span>unpublish-all!</span></div></a></li><li class="depth-1"><a href="slacker.server.cluster.html#var-unpublish-ns.21"><div class="inner"><span>unpublish-ns!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">slacker.server.cluster</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var--.3ESlackerClusterServer"><h3>-&gt;SlackerClusterServer</h3><div class="usage"><code>(-&gt;SlackerClusterServer server service-registry)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class slacker.server.cluster.SlackerClusterServer.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L8">view source</a></div></div><div class="public anchor" id="var-get-server-data"><h3>get-server-data</h3><div class="usage"><code>(get-server-data slacker-server)</code></div><div class="doc"><div class="markdown"><p>Fetch server data from zookeeper</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L15">view source</a></div></div><div class="public anchor" id="var-map-.3ESlackerClusterServer"><h3>map-&gt;SlackerClusterServer</h3><div class="usage"><code>(map-&gt;SlackerClusterServer m__7873__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class slacker.server.cluster.SlackerClusterServer, taking a map of keywords to field values.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L8">view source</a></div></div><div class="public anchor" id="var-publish-all.21"><h3>publish-all!</h3><div class="usage"><code>(publish-all! server)</code></div><div class="doc"><div class="markdown"><p>Re-publish all namespaces hosted by this server.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L43">view source</a></div></div><div class="public anchor" id="var-publish-ns.21"><h3>publish-ns!</h3><div class="usage"><code>(publish-ns! server the-ns-name)</code></div><div class="doc"><div class="markdown"><p>Publish a namespace to zookeeper. Typicially this is for republish a namespace after <code>unpublish-ns!</code> or <code>unpublish-all!</code>.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L37">view source</a></div></div><div class="public anchor" id="var-set-server-data.21"><h3>set-server-data!</h3><div class="usage"><code>(set-server-data! slacker-server data)</code></div><div class="doc"><div class="markdown"><p>Update server data for this server, clients will be notified</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L10">view source</a></div></div><div class="public anchor" id="var-start-slacker-server"><h3>start-slacker-server</h3><div class="usage"><code>(start-slacker-server fn-coll port &amp; options)</code></div><div class="doc"><div class="markdown"><p>Start a slacker server to expose all public functions under a namespace. This function is enhanced for cluster support. You can supply a zookeeper instance and a cluster name to the :cluster option to register this server as a node of the cluster.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L59">view source</a></div></div><div class="public anchor" id="var-stop-slacker-server"><h3>stop-slacker-server</h3><div class="usage"><code>(stop-slacker-server slacker-server)</code></div><div class="doc"><div class="markdown"><p>Shutdown slacker server, gracefully.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L86">view source</a></div></div><div class="public anchor" id="var-unpublish-all.21"><h3>unpublish-all!</h3><div class="usage"><code>(unpublish-all! server)</code></div><div class="doc"><div class="markdown"><p>Unpublish all namespaces on this server. This is helpful when you need graceful shutdown. The client needs some time to receive the offline event so in this period the server still works.</p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L30">view source</a></div></div><div class="public anchor" id="var-unpublish-ns.21"><h3>unpublish-ns!</h3><div class="usage"><code>(unpublish-ns! server the-ns-name)</code></div><div class="doc"><div class="markdown"><p>Unpublish a namespace from zookeeper, which means the service under the namespace on this server will be offline from client, while we still have time for remaining requests to finish. </p></div></div><div class="src-link"><a href="https://github.com/sunng87/slacker/blob/master/src/slacker/server/cluster.clj#L23">view source</a></div></div></div></body></html>